
define (TestProgram dv(.VirtualInstrument (
    c(
        e(.Queue<.Double> q)
        e(dv(.Double 42.5) x)
        e(.Double y)
        e(.Boolean timedOut)
        e(dv(.Double 1.1) c1_1)
        e(dv(.Double 1.2) c1_2)
        e(dv(.Double 1.3) c1_3)
        e(dv(.Double 1.4) c1_4)
    )
    
    clump (
        Trigger(1)
        Trigger(2)
        Wait(1)
        Wait(2)
        DPrintf(" Reader/Writer done")
    )
    
    clump (
        WaitMilliseconds(50)
        EnqueueElement(q c1_1 1000 timedOut)        
        DPrintf(">>Added1 new value %s" c1_1)
        
        WaitMilliseconds(51)
        EnqueueElement(q c1_2 1000 timedOut)        
        DPrintf(">>Added1 new value %s" c1_2)

        WaitMilliseconds(52)
        EnqueueElement(q c1_3 1000 timedOut)        
        DPrintf(">>Added1 new value %s" c1_3)

        WaitMilliseconds(53)
        EnqueueElement(q c1_4 1000 timedOut)        
        DPrintf(">>Added1 new value %s" c1_4)
    )
    
    clump (
        WaitMilliseconds(61)
        DequeueElement(q y 55 timedOut)
        DPrintf("Dequeued1 value is %s to:%s" y timedOut)
        DequeueElement(q y 70 timedOut)
        DPrintf("Dequeued2 value is %s to:%s" y timedOut)
        DequeueElement(q y 72 timedOut)
        DPrintf("Dequeued3 value is %s to:%s" y timedOut)
        DequeueElement(q y 73 timedOut)
        DPrintf("Dequeued4 value is %s to:%s" y timedOut)
        DequeueElement(q y 73 timedOut)
        DPrintf("Dequeued5 value is %s to:%s" y timedOut)
    )
    
) ) )


enqueue (TestProgram)
